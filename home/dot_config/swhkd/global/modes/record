super + r
    @enter record && \
    [ -z "$TMPDIR" ] && TMPDIR="/tmp"; \
    printf '%s\n' "Super+r,Record" >> "${TMPDIR}/swhkd_$(id --user)"

mode record
{escape,q}
    @escape{,} && \
    [ -z "$TMPDIR" ] && TMPDIR="/tmp"; \
    mode_file="${TMPDIR}/swhkd_$(id --user)" && \
    printf '%s\n' "$(head -n -1 "$mode_file")" > "$mode_file"

# Capture the entire desktop or select a region to capture, and then copy the
#  image to the clipboard.
{d,r}
    @escape && \
    [ -z "$TMPDIR" ] && TMPDIR="/tmp"; \
    mode_file="${TMPDIR}/swhkd_$(id --user)" && \
    printf '%s\n' "$(head -n -1 "$mode_file")" > "$mode_file" || exit 0; \

    if [ -d "$TMPDIR" ]; then \
        filepath="$TMPDIR/image.png"; \
    else \
        umask 077; \
        filepath="$(mktemp --suffix=.png)"; \
    fi; \

    maim {,--hidecursor --select} "$filepath" && \
    xclip -selection clipboard -target image/png -in "$filepath"
endmode
